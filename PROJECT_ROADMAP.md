# 🎮 CC Webapp 프로젝트 완성 로드맵

## 🎯 프로젝트 목표
모바일게임식 F2P 생태계를 가진 성인 콘텐츠 웹앱 완성
- **도파민 루프** 중심의 사용자 경험
- **사이버 토큰** 기반 경제 시스템
- **본사 사이트** 연동을 통한 크로스 플랫폼 서비스

## 📊 현재 진행 상황

### ✅ 완료된 작업
1. **Docker 환경 구성** (100% 완료)
   - 개발/프로덕션 환경 분리
   - 환경 변수 시스템 구축
   - 헬스체크 및 서비스 의존성 관리

2. **프로젝트 구조 분석** (100% 완료)
   - 백엔드 중복 구조 파악
   - Import 경로 문제점 식별
   - 문서 기반 요구사항 정리

### 🔄 진행 중 작업
1. **백엔드 구조 표준화** (진행 중)
   - AI 프롬프트 작성 완료
   - 실행 대기 상태

## 🚀 Phase 1: 백엔드 기반 구축 (2-3주)

### 1.1 구조 표준화 (최우선) ⚡
**담당**: 외부 AI + 검토
**기간**: 2-3일
**목표**: 백엔드 구조 통합 및 Import 오류 해결

**세부 작업**:
- [ ] `/app/` 제거 및 `/cc-webapp/backend/` 통합
- [ ] Import 경로 표준화
- [ ] Docker Compose 설정 수정
- [ ] 테스트 검증

**완료 기준**:
```bash
✅ docker-compose up backend (에러 없이 실행)
✅ pytest tests/ (모든 테스트 통과)
✅ curl http://localhost:8000/health (200 응답)
```

### 1.2 데이터베이스 스키마 완성 🗄️
**담당**: 백엔드 개발자
**기간**: 1주
**의존성**: 1.1 완료 후

**핵심 테이블**:
```sql
-- 사용자 및 토큰 관리
users (id, email, cyber_tokens, streak_count, segment)
user_actions (id, user_id, action_type, value, timestamp)
user_rewards (id, user_id, reward_type, amount, timestamp)

-- 게임 및 콘텐츠
gacha_items (id, name, rarity, image_url, drop_rate)
adult_content (id, stage, unlock_condition, content_url)
battlepass_tiers (id, level, required_xp, rewards)

-- 세그먼테이션
user_segments (user_id, rfm_score, ltv_prediction, last_updated)
```

**Alembic 마이그레이션**:
- [ ] 초기 스키마 생성
- [ ] 테스트 데이터 시딩 스크립트
- [ ] 인덱스 최적화

### 1.3 핵심 API 엔드포인트 구현 📡
**담당**: 백엔드 개발자
**기간**: 1주
**의존성**: 1.2 완료 후

**필수 엔드포인트**:
```python
# 인증 및 사용자 관리
POST /api/auth/login
POST /api/auth/signup
GET /api/users/{id}/profile

# 토큰 및 액션
POST /api/actions  # 사용자 행동 로깅
GET /api/users/{id}/tokens  # 토큰 잔고
POST /api/tokens/sync  # 본사 사이트 동기화

# 게임 시스템
POST /api/gacha/pull  # 가챠 뽑기
POST /api/games/slot-spin  # 슬롯머신
GET /api/rewards/{user_id}  # 보상 조회
```

## 🎮 Phase 2: 게임 로직 구현 (3-4주)

### 2.1 도파민 루프 시스템 🎯
**담당**: 게임 로직 개발자
**기간**: 2주

**핵심 컴포넌트**:
- [ ] **스트릭 카운터**: 연속 접속/행동 추적
- [ ] **즉시 피드백**: 애니메이션 + 사운드 + 시각적 효과
- [ ] **변동 보상**: RNG 기반 보상량 조절
- [ ] **진행도 표시**: 배틀패스, 레벨업, 다음 목표

**구현 세부사항**:
```python
# 도파민 트리거 이벤트
- LOGIN_STREAK: 연속 로그인 보너스
- GACHA_RARE: 레어 아이템 획득
- LEVEL_UP: 사용자 레벨 상승
- STAGE_UNLOCK: 새로운 콘텐츠 해금
- ACHIEVEMENT: 업적 달성
```

### 2.2 사이버 토큰 경제 시스템 💰
**담당**: 백엔드 + 게임 로직 개발자
**기간**: 2주

**토큰 플로우**:
```
획득 경로:
- 일일 로그인: 10-50 토큰
- 미니게임 승리: 5-100 토큰
- 광고 시청: 20 토큰
- 과금: 1$ = 100 토큰

소비 경로:
- 가챠 뽑기: 50-500 토큰
- 스킵 티켓: 100 토큰
- 성인 콘텐츠 언락: 200-1000 토큰
- 배틀패스 부스트: 300 토큰
```

**Redis 실시간 처리**:
- [ ] 토큰 잔고 실시간 업데이트
- [ ] 중복 소비 방지 (distributed lock)
- [ ] 본사 사이트와 동기화

### 2.3 개인화 추천 시스템 🎲
**담당**: 데이터 사이언스 + 백엔드
**기간**: 2주

**RFM 세그먼테이션**:
```python
# Recency, Frequency, Monetary 분석
HIGH_VALUE_WHALE: 고과금 + 높은 활동도
RISK_CHURN: 최근 활동 감소
LOYAL_F2P: 무과금 + 높은 활동도
NEW_USER: 신규 사용자
```

**개인화 요소**:
- [ ] 가챠 확률 조정 (세그먼트별)
- [ ] 개인맞춤 보상 추천
- [ ] 최적 알림 시간대
- [ ] 콘텐츠 추천 순서

## 🎨 Phase 3: 프론트엔드 UX (2-3주)

### 3.1 핵심 게임 화면 🖥️
**담당**: 프론트엔드 개발자
**기간**: 2주

**우선순위 화면**:
1. **메인 대시보드**: 토큰 잔고, 스트릭, 알림
2. **가챠 시스템**: 애니메이션, 사운드, 확률 표시
3. **슬롯머신**: 실시간 애니메이션, 결과 연출
4. **성인 콘텐츠**: 단계별 언락, 프리뷰
5. **배틀패스**: 진행도, 보상 미리보기

**UX 핵심 원칙**:
- **즉시성**: 모든 액션에 즉각 피드백
- **진행감**: 진행도 바 및 달성률 표시
- **희소성**: 한정 시간 혜택 강조
- **사회적 증명**: 다른 사용자 활동 표시

### 3.2 모바일 최적화 📱
**담당**: 프론트엔드 + UX 디자이너
**기간**: 1주

**반응형 디자인**:
- [ ] 터치 최적화 버튼 크기
- [ ] 스와이프/드래그 제스처
- [ ] 세로/가로 모드 대응
- [ ] 로딩 시간 최적화

## 🔗 Phase 4: 외부 연동 (2주)

### 4.1 본사 사이트 API 연동 🌐
**담당**: 백엔드 개발자
**기간**: 1주

**연동 기능**:
```python
# 토큰 동기화
GET /api/corporate/balance/{user_id}
POST /api/corporate/transfer
{
  "from_user": 123,
  "to_user": 456, 
  "amount": 100,
  "memo": "cc-webapp 전송"
}

# 사용자 정보 동기화
GET /api/corporate/user/{user_id}
POST /api/corporate/activity
```

### 4.2 실시간 알림 시스템 📲
**담당**: 백엔드 + 인프라
**기간**: 1주

**알림 트리거**:
- 토큰 만료 임박
- 새로운 콘텐츠 추가
- 친구 활동 (가챠 대박 등)
- 한정시간 이벤트

## 📈 Phase 5: 분석 및 최적화 (진행형)

### 5.1 사용자 행동 분석 📊
**담당**: 데이터 분석가
**지속 작업**

**핵심 지표**:
```
재방문율 (D1, D7, D30)
ARPU (Average Revenue Per User)
토큰 사용 패턴
이탈 지점 분석
가챠 소비 행태
```

### 5.2 A/B 테스트 프레임워크 🧪
**담당**: 전체 팀
**지속 작업**

**테스트 대상**:
- 가챠 확률 조정
- 보상량 밸런싱
- UI/UX 개선안
- 알림 메시지 효과

## 🎯 주요 마일스톤

### Week 2: 백엔드 기반 완성
```bash ✅ 백엔드 구조 표준화 완료
✅ 데이터베이스 스키마 구축
✅ 핵심 API 엔드포인트 동작
✅ Docker 환경에서 전체 실행 가능
```

### Week 4: MVP 완성
```bash
✅ 사용자 가입/로그인
✅ 토큰 시스템 동작
✅ 기본 가챠 시스템
✅ 간단한 프론트엔드 UI
```

### Week 6: 게임 로직 완성
```bash
✅ 도파민 루프 시스템
✅ 개인화 추천
✅ 성인 콘텐츠 언락
✅ 배틀패스 시스템
```

### Week 8: 본격 서비스 준비
```bash
✅ 본사 사이트 연동
✅ 실시간 알림
✅ 모바일 최적화
✅ 분석 대시보드
```

## 🚨 리스크 요소 및 대응

### 기술적 리스크
1. **백엔드 구조 문제**: 외부 AI 작업 실패 시 수동 수정
2. **성능 문제**: Redis 캐싱 및 DB 쿼리 최적화
3. **동시성 이슈**: 토큰 차감 시 Race Condition 방지

### 비즈니스 리스크
1. **법적 문제**: 성인 콘텐츠 연령 인증 강화
2. **과금 정책**: 확률형 아이템 규제 대응
3. **사용자 이탈**: 도파민 루프 과도할 경우 역효과

## 💡 성공 요인

### 개발 측면
- **지속적 통합**: GitHub Actions CI/CD
- **코드 리뷰**: 모든 PR에 대한 코드 리뷰
- **테스트 커버리지**: 80% 이상 유지
- **문서화**: API 문서 및 개발 가이드

### 제품 측면
- **사용자 피드백**: 베타 테스터 그룹 운영
- **데이터 기반**: 지표 기반 개선
- **빠른 실험**: A/B 테스트 활용
- **커뮤니티**: 사용자 커뮤니티 구축

---

**📞 다음 단계**: 백엔드 구조 표준화 완료 후 Phase 1.2 데이터베이스 스키마 작업 시작
