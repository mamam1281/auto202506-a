# ğŸ–¥ï¸ ê¸°ìˆ  êµ¬í˜„ ë° API ê°€ì´ë“œ

## ê°œìš”
ìë™í™” ì‹œìŠ¤í…œì˜ ê¸°ìˆ  êµ¬í˜„ê³¼ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ì•ˆë‚´í•©ë‹ˆë‹¤.

## 1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### Frontend (React/Next.js)
- **ê¸°ìˆ  ìŠ¤íƒ**: React 18 + Next.js + Redux Toolkit + Tailwind CSS
- **ì‹¤ì‹œê°„ í†µì‹ **: WebSocketì„ í†µí•œ CJ AI ì±„íŒ…
- **ìƒíƒœ ê´€ë¦¬**: Redux + React Query

### Backend (FastAPI)
- **ê¸°ìˆ  ìŠ¤íƒ**: FastAPI + SQLAlchemy + Redis + WebSocket
- **ì¸ì¦**: JWT + bcrypt + ì´ˆëŒ€ ì½”ë“œ ì‹œìŠ¤í…œ
- **ê²Œì„ ì—”ì§„**: ëª¨ë“ˆí™”ëœ í™•ë¥  ê¸°ë°˜ ì‹œìŠ¤í…œ

## 2. ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦ ê´€ë¦¬
```
POST /auth/login          - ì´ˆëŒ€ ì½”ë“œ ê¸°ë°˜ ë¡œê·¸ì¸
POST /auth/register       - ì‚¬ìš©ì ë“±ë¡
POST /auth/refresh        - í† í° ê°±ì‹ 
```

### ê²Œì„ ì„œë¹„ìŠ¤
```
POST /games/slot/spin     - ìŠ¬ë¡¯ ë¨¸ì‹  ìŠ¤í•€
POST /games/roulette/spin - ë£°ë › ìŠ¤í•€  
POST /games/gacha/pull    - ê°€ì±  ë½‘ê¸°
GET  /games/history       - ê²Œì„ ì´ë ¥ ì¡°íšŒ
GET  /games/probability   - í™•ë¥  ì •ë³´ ì¡°íšŒ
```

### AI ìƒë‹´ ì„œë¹„ìŠ¤
```
WS   /chat/ws/{user_id}   - WebSocket ì±„íŒ… ì—°ê²°
POST /ai/analyze          - ê°ì • ë¶„ì„ ìš”ì²­
GET  /ai/templates        - ì‘ë‹µ í…œí”Œë¦¿ ì¡°íšŒ
```

### ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸
```
GET  /segments/user       - ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸ ì¡°íšŒ
PUT  /segments/adjust     - ì„¸ê·¸ë¨¼íŠ¸ ì¡°ì •
```

### í† í° ê´€ë¦¬
```
GET  /tokens/balance      - í† í° ì”ê³  ì¡°íšŒ
POST /tokens/sync         - ë³¸ì‚¬ ì‚¬ì´íŠ¸ í† í° ë™ê¸°í™”
```

## 3. ê²Œì„ ì„œë¹„ìŠ¤ êµ¬í˜„

### ìŠ¬ë¡¯ ë¨¸ì‹  ë¡œì§
- **ê¸°ë³¸ í™•ë¥ **: 15% ìŠ¹ë¥ 
- **ì„¸ê·¸ë¨¼íŠ¸ ë³´ë„ˆìŠ¤**: Whale(+10%), Medium(+5%), Low(0%)
- **ìŠ¤íŠ¸ë¦­ ì‹œìŠ¤í…œ**: ì—°ì† ì‹¤íŒ¨ ì‹œ í™•ë¥  ì¦ê°€, 7íšŒ ì‹œ ê°•ì œ ìŠ¹ë¦¬
- **ë¹„ìš©**: 10 í† í°

### ë£°ë › ì‹œìŠ¤í…œ
- **ë² íŒ… íƒ€ì…**: ìˆ«ì(35ë°°), ìƒ‰ìƒ(2ë°°), í™€ì§(2ë°°)
- **í•˜ìš°ìŠ¤ ì—£ì§€**: ì„¸ê·¸ë¨¼íŠ¸ë³„ ì°¨ë“± ì ìš©
- **ìµœì†Œ ë² íŒ…**: 10 í† í°

### ê°€ì±  ì‹œìŠ¤í…œ
- **ë“±ê¸‰ë³„ í™•ë¥ **: Legendary(5%), Epic(20%), Rare(50%), Common(25%)
- **Pity System**: 90íšŒ ë³´ì¥ ì‹œìŠ¤í…œ
- **ì¤‘ë³µ ë°©ì§€**: ë³´ìœ  ì•„ì´í…œ í™•ë¥  50% ê°ì†Œ

## 4. ì¸ì¦ ë° ë³´ì•ˆ

### JWT í† í° ê´€ë¦¬
- **ë§Œë£Œ ì‹œê°„**: 24ì‹œê°„
- **ìë™ ê°±ì‹ **: ë§Œë£Œ 1ì‹œê°„ ì „ ìë™ ê°±ì‹ 
- **ë³´ì•ˆ í—¤ë”**: Bearer Token ë°©ì‹

### ì´ˆëŒ€ ì½”ë“œ ì‹œìŠ¤í…œ
- **í˜•ì‹**: 6ìë¦¬ ì˜ë¬¸/ìˆ«ì ì¡°í•©
- **ê²€ì¦**: ì‹¤ì‹œê°„ ìœ íš¨ì„± í™•ì¸
- **ì˜ˆì‹œ**: ABC123, DEF456, GHI789

### ë¹„ë°€ë²ˆí˜¸ ì •ì±…
- **ê¸¸ì´**: 8-20ì
- **êµ¬ì„±**: ì˜ë¬¸ + ìˆ«ì í•„ìˆ˜
- **ê²€ì¦**: ì‹¤ì‹œê°„ ì •ì±… í™•ì¸

## 5. ì‹¤ì‹œê°„ ì±„íŒ… ì‹œìŠ¤í…œ

### WebSocket ì—°ê²°
```javascript
const ws = new WebSocket(`ws://localhost:8000/chat/ws/${userId}`);

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    handleCJResponse(data);
};
```

### CJ AI ê°ì • ë¶„ì„
- **ê°ì • ì¸ì‹**: frustrated, excited, curious, tired
- **ì‘ë‹µ ìƒì„±**: ìƒí™©ë³„ ë§ì¶¤ ì‘ë‹µ
- **ì•¡ì…˜ ì œì•ˆ**: í† í° ë¶€ì¡± ì‹œ ë³¸ì‚¬ ì‚¬ì´íŠ¸ ë¦¬ë‹¤ì´ë ‰íŠ¸

## 6. ì‘ë‹µ í˜•ì‹

### í‘œì¤€ ì‘ë‹µ
```json
{
  "success": true,
  "data": {},
  "message": "Success",
  "timestamp": "2025-01-XX"
}
```

### ê²Œì„ ê²°ê³¼ ì‘ë‹µ
```json
{
  "success": true,
  "result": "WIN",
  "symbols": ["ğŸ’", "ğŸ’", "ğŸ’"],
  "reward": 100,
  "streak": 0,
  "message": "ì¶•í•˜í•©ë‹ˆë‹¤! 100 í† í° íšë“!"
}
```

### ì—ëŸ¬ ì‘ë‹µ
```json
{
  "success": false,
  "error_code": "INSUFFICIENT_TOKENS",
  "message": "í† í°ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.",
  "required_tokens": 10,
  "current_tokens": 5
}
```

## 7. ìƒíƒœ ì½”ë“œ

- `200` - ì„±ê³µ
- `400` - ì˜ëª»ëœ ìš”ì²­
- `401` - ì¸ì¦ ì‹¤íŒ¨  
- `402` - í† í° ë¶€ì¡±
- `403` - ê¶Œí•œ ì—†ìŒ
- `404` - ë¦¬ì†ŒìŠ¤ ì—†ìŒ
- `409` - ì¤‘ë³µ ë°ì´í„°
- `500` - ì„œë²„ ì˜¤ë¥˜

## 8. ìš”ì²­ ì œí•œ

- **ì¼ë°˜ API**: ë¶„ë‹¹ 100íšŒ
- **ê²Œì„ API**: ë¶„ë‹¹ 30íšŒ
- **ì±„íŒ… API**: ì œí•œ ì—†ìŒ
- **ì¸ì¦ API**: ë¶„ë‹¹ 10íšŒ

## 9. ê°œë°œ í™˜ê²½ ì„¤ì •

### ë¡œì»¬ ê°œë°œ
```bash
# Backend ì‹¤í–‰
uvicorn app.main:app --reload --port 8000

# Frontend ì‹¤í–‰  
npm run dev

# WebSocket í…ŒìŠ¤íŠ¸
wscat -c ws://localhost:8000/chat/ws/1
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •
í™˜ê²½ë³„ ì„¤ì •ì€ [í™˜ê²½ ì„¤ì • ê°€ì´ë“œ](./13-environment-config.md) ì°¸ì¡°
