# 🎮 CC (Casino-Club) 통합 프론트엔드 개발 가이드 v2.0

## 📋 목차
1. [프로젝트 현황 및 아키텍처](#프로젝트-현황-및-아키텍처)
2. [MVP 핵심 기능 정의](#mvp-핵심-기능-정의)
3. [컴포넌트 체계 및 구현 계획](#컴포넌트-체계-및-구현-계획)
4. [페이지 구조 및 라우팅](#페이지-구조-및-라우팅)
5. [개발 우선순위 및 일정](#개발-우선순위-및-일정)
6. [기술 스택 및 도구](#기술-스택-및-도구)
7. [테스트 전략](#테스트-전략)
8. [배포 및 운영](#배포-및-운영)

---

## 프로젝트 현황 및 아키텍처

### 🏗️ 현재 구조 분석
```
cc-webapp/frontend/
├── app/                    # Next.js App Router (메인 페이지들)
│   ├── slots/             # 슬롯 게임
│   ├── roulette/          # 룰렛 게임  
│   ├── rps/               # 가위바위보
│   ├── gacha/             # 가챠 시스템
│   ├── quiz/              # 퀴즈
│   └── profile/           # 사용자 프로필
├── components/            # 재사용 컴포넌트
│   ├── ui/                # UI 컴포넌트 라이브러리
│   │   ├── basic/         # Button, Input, etc.
│   │   ├── layout/        # Container, Grid, etc.
│   │   ├── feedback/      # Toast, Modal, etc.
│   │   ├── navigation/    # Menu, Breadcrumb, etc.
│   │   ├── data-display/  # Card, Table, etc.
│   │   ├── game/          # Game-specific components
│   │   └── utils/         # Utility components
│   └── games/             # 게임별 특화 컴포넌트
├── pages/                 # 데모 및 테스트 페이지
├── hooks/                 # 커스텀 훅
├── utils/                 # 유틸리티 함수
├── styles/                # 글로벌 스타일
└── types/                 # TypeScript 타입 정의
```

### 🎯 기술 스택 현황
- **프레임워크**: Next.js 15+ (App Router)
- **언어**: TypeScript + TSX
- **스타일링**: Tailwind CSS + CSS Modules
- **애니메이션**: Framer Motion
- **상태관리**: React Context + 로컬 상태
- **테스트**: Jest + React Testing Library + Cypress + Storybook
- **빌드도구**: Turbopack (개발), Webpack (프로덕션)

---

## MVP 핵심 기능 정의

### 🎮 1차 MVP (Week 1-2)
**목표**: 핵심 게임플레이와 도파민 루프 검증

#### 필수 구현 기능
1. **초대코드 기반 가입 시스템**
   - 초대코드 + 닉네임만으로 즉시 가입
   - 가입 즉시 모든 서비스 이용 가능
   - 랭크 시스템으로 서비스 레벨 관리 (VIP/PREMIUM/STANDARD)
   - 로컬 스토리지 기반 단순 인증

2. **핵심 게임 3종**
   - **슬롯 머신**: Variable-Ratio Reward 시스템
   - **룰렛**: 확률 기반 베팅
   - **가위바위보**: 간단한 대전 게임

3. **기본 경제 시스템**
   - 무료 코인 지급
   - 코인 소모/획득 메커니즘
   - 기본 리워드 시스템

4. **감정 기반 홈 대시보드**
   - 감정 상태 프롬프트
   - 게임 추천 시스템
   - 사용자 통계 표시

#### 제외 기능 (2차 MVP)
- 가챠 시스템 고도화
- 프리미엄 젬 & 결제
- 배틀패스
- 성인 콘텐츠 통합
- RFM 세그먼테이션

---

## 컴포넌트 체계 및 구현 계획

### 🧩 컴포넌트 우선순위 매트릭스

#### Tier 1: 핵심 기반 컴포넌트 (Week 1)
```typescript
// 기본 UI
- Button (모든 variant, 애니메이션 포함)
- Input (폼 검증, 에러 상태 포함)
- Card (글래스모피즘, 네온 효과)
- LoadingSpinner
- Toast/Notification

// 레이아웃
- Layout (헤더, 사이드바, 푸터)
- Container (반응형)
- Grid (게임 카드 배치용)

// 게임 기반
- TokenBalanceWidget (실시간 잔액 표시)
- GameCard (게임 선택 카드)
- SlotMachine (핵심 게임)
```

#### Tier 2: 게임 특화 컴포넌트 (Week 2)
```typescript
// 게임 컴포넌트
- RouletteWheel
- RPSGame
- GachaBox
- ProgressLoader

// 피드백
- WinAnimation
- CoinDropEffect
- EmotionPrompt
- RewardModal
```

#### Tier 3: 고도화 컴포넌트 (Week 3+)
```typescript
// 고급 UI
- CJChatBubble (AI 채팅)
- TokenBalanceWidget (고급 상태)
- MissionCard
- RewardCard

// 유틸리티
- DebugGrid
- BreakpointIndicator
- PerformanceMonitor
```

### 📱 반응형 우선순위
1. **Mobile First**: 375px (iPhone SE) 기준
2. **Tablet**: 768px 
3. **Desktop**: 1024px+

---

## 페이지 구조 및 라우팅

### 🗺️ 라우팅 맵

#### 메인 게임 플로우
```
/                # 홈 대시보드 (게임 선택)
/slots           # 슬롯 머신
/roulette        # 룰렛
/rps             # 가위바위보
/profile         # 사용자 프로필
```

#### 사용자 관리
```
/profile         # 사용자 프로필
/profile/stats   # 상세 통계
/profile/history # 게임 히스토리
/profile/rewards # 리워드 내역
```

#### 지원 페이지
```
/loading         # 스플래시 화면
/404            # 에러 페이지
/maintenance    # 점검 페이지
```

### 🎯 페이지별 핵심 컴포넌트 매핑

#### 홈 대시보드 (/)
```tsx
- Layout
  - Header (TokenBalanceWidget, 알림)
  - EmotionPrompt (감정 기반 게임 추천)
  - GameGrid (게임 카드 3x2 레이아웃)
    - GameCard x6 (slots, roulette, rps, gacha, quiz, profile)
  - StatsOverview (간단한 통계)
  - Footer
```

#### 슬롯 게임 (/games/slots)
```tsx
- GameLayout
  - GameHeader (잔액, 나가기 버튼)
  - SlotMachine
    - ReelContainer x3
    - SpinButton
    - BetControls
  - WinAnimation (조건부)
  - GameFooter (규칙, 도움말)
```

---

## 개발 우선순위 및 일정

### 📅 Week 1: 기반 구축
**Day 1-2: 프로젝트 셋업**
- [x] Next.js 프로젝트 구조 완성
- [x] Tailwind + Framer Motion 설정
- [x] TypeScript 엄격 모드 설정
- [x] 테스트 환경 구축

**Day 3-4: 핵심 UI 컴포넌트**
- [ ] Button 컴포넌트 완성 (모든 variant)
- [ ] Input 컴포넌트 완성 (검증 포함)
- [ ] Card 컴포넌트 완성 (글래스모피즘)
- [ ] Layout 시스템 구축

**Day 5-7: 기본 사용자 시스템**
- [ ] 닉네임 입력 컴포넌트
- [ ] 로컬 스토리지 사용자 정보 관리
- [ ] 기본 프로필 페이지
- [ ] 간단한 사용자 식별 시스템

### 📅 Week 2: 게임 구현
**Day 1-3: 슬롯 머신**
- [ ] SlotMachine 컴포넌트
- [ ] 릴 애니메이션 (Framer Motion)
- [ ] Variable-Ratio Reward 로직
- [ ] 코인 시스템 연동

**Day 4-5: 룰렛 게임**
- [ ] RouletteWheel 컴포넌트
- [ ] 회전 애니메이션
- [ ] 베팅 시스템
- [ ] 확률 계산 로직

**Day 6-7: 대시보드 통합**
- [ ] 홈 대시보드 완성
- [ ] EmotionPrompt 컴포넌트
- [ ] GameGrid 레이아웃
- [ ] 실시간 데이터 연동

### 📅 Week 3+: 고도화
- [ ] 가위바위보 게임
- [ ] 가챠 시스템 (2차 MVP)
- [ ] AI 채팅 (CJChatBubble)
- [ ] 고급 애니메이션 효과

---

## 기술 스택 및 도구

### 🛠️ 핵심 라이브러리

#### 필수 Dependencies
```json
{
  "dependencies": {
    "next": "^15.3.3",
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "typescript": "^5.8.3",
    "framer-motion": "^12.16.0",
    "lucide-react": "^0.511.0",
    "canvas-confetti": "^1.9.3",
    "use-sound": "^5.0.0",
    "axios": "^1.9.0"
  }
}
```

#### 개발 Dependencies
```json
{
  "devDependencies": {
    "@types/jest": "^29.5.14",
    "@types/node": "^24.0.3",
    "@types/react": "^19.1.8",
    "@testing-library/react": "^16.3.0",
    "cypress": "^14.4.0",
    "jest": "^29.7.0",
    "storybook": "^8.6.10",
    "tailwindcss": "^4.1.8"
  }
}
```

### 🎨 디자인 토큰

#### 색상 시스템
```css
:root {
  /* 네온 퍼플 계열 */
  --neon-purple-1: #7b29cd;
  --neon-purple-2: #870dd1;
  --neon-purple-3: #5b30f6;
  --neon-purple-4: #8054f2;
  
  /* 게임 테마 색상 */
  --game-gold: #FFD700;
  --game-success: #10b981;
  --game-warning: #f59e0b;
  --game-error: #ef4444;
  
  /* 배경 및 표면 */
  --bg-primary: #0f0f23;
  --bg-secondary: #1a1a2e;
  --surface-glass: rgba(255,255,255,0.1);
}
```

#### 간격 시스템 (8px 기반)
```css
:root {
  --spacing-1: 8px;
  --spacing-2: 16px;
  --spacing-3: 24px;
  --spacing-4: 32px;
  --spacing-6: 48px;
  --spacing-8: 64px;
}
```

---

## 테스트 전략

### 🧪 테스트 피라미드

#### Unit Tests (70%)
- 모든 UI 컴포넌트
- 게임 로직 함수
- 유틸리티 함수
- 커스텀 훅

#### Integration Tests (20%)
- 페이지 단위 렌더링
- API 통신 연동
- 상태 관리 플로우

#### E2E Tests (10%)
- 핵심 사용자 플로우
- 게임 플레이 시나리오
- 결제 플로우 (추후)

### 📊 커버리지 목표
- **라인 커버리지**: 80%+
- **브랜치 커버리지**: 75%+
- **함수 커버리지**: 85%+

---

## 배포 및 운영

### 🚀 배포 파이프라인

#### 환경 구성
```bash
# 개발환경
npm run dev          # localhost:3000

# 스테이징
npm run build:staging
npm run start:staging

# 프로덕션  
npm run build
npm run start
```

#### CI/CD (GitHub Actions)
```yaml
name: Frontend CI/CD
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run tests
        run: npm run test:ci
      - name: Run E2E tests
        run: npm run cy:run:headless
      - name: Build
        run: npm run build
```

### 📈 성능 목표
- **First Contentful Paint**: < 1.5s
- **Largest Contentful Paint**: < 2.5s
- **Cumulative Layout Shift**: < 0.1
- **First Input Delay**: < 100ms

---

## 🧪 테스트 전략 및 현황 (2025.06.20 업데이트)

### 테스트 환경 구성 (✅ 완료)

#### Jest + React Testing Library (단위/통합 테스트)
```bash
# 테스트 실행 명령어
npm run test              # 전체 테스트 실행
npm run test:watch        # 와치 모드
npm run test:coverage     # 커버리지 포함
```

**현재 테스트 현황:**
- ✅ **49개 테스트 통과 / 5개 테스트 스위트**
- ✅ Button 컴포넌트: 8개 테스트 (클릭, 변형, 스타일, 접근성)
- ✅ Card 컴포넌트: 7개 테스트 (렌더링, 호버, 반응형)
- ✅ EmotionFeedback 컴포넌트: 6개 테스트 (감정별 표시, 스타일링)
- ✅ useEmotionFeedback 훅: 7개 테스트 (API 호출, 에러 핸들링)
- ✅ rewardUtils 유틸리티: 21개 테스트 (확률 계산, 가챠 시스템)

#### Cypress E2E 테스트 (⚙️ 설정 완료, 🔄 실행 대기)
```bash
# E2E 테스트 실행 명령어
npm run test:e2e          # 헤드리스 모드
npm run cy:open           # GUI 모드 (개발 중)
npm run cy:run            # CI 모드
```

**E2E 테스트 시나리오:**
- 🟡 컴포넌트 상호작용 테스트 (button.cy.ts, card.cy.ts)
- 🟡 게임 플로우 테스트 (cc_flow.spec.js)
  - 슬롯 머신 스핀 → 결과 표시 → 감정 피드백
  - 룰렛 베팅 → 결과 확인 → 리워드 수령
  - 가위바위보 대전 → 승부 판정 → 스트릭 업데이트
- 🟡 페이지 라우팅 및 네비게이션 테스트
- 🟡 API 모킹 및 에러 상황 테스트

#### 테스트 설정 특징
- **Framer Motion 모킹**: 애니메이션 props 제거하여 테스트 안정성 확보
- **Axios 모킹**: API 호출 시뮬레이션으로 독립적 테스트 환경 구축
- **Canvas Confetti 모킹**: 브라우저 환경 의존성 제거
- **Sound Hook 모킹**: 오디오 재생 테스트 환경 최적화

### 테스트 커버리지 목표
- **컴포넌트 단위 테스트**: 100% (핵심 UI 컴포넌트)
- **비즈니스 로직 테스트**: 95% (게임 로직, 리워드 시스템)
- **E2E 플로우 테스트**: 주요 사용자 여정 100% 커버
- **성능 테스트**: Core Web Vitals 지속 모니터링

---

## 다음 단계 및 확장 계획

### 🔮 Phase 2 (Month 2)
- 프리미엄 젬 시스템
- 결제 모듈 통합
- 배틀패스 시스템
- 고급 가챠 메커니즘

### 🔮 Phase 3 (Month 3+)
- 성인 콘텐츠 통합
- AI 개인화 추천
- 소셜 기능 (친구, 리더보드)
- PWA 변환

---

*최종 업데이트: 2025년 6월 20일*
*버전: 2.0*
*작성자: Senior Frontend Developer*
