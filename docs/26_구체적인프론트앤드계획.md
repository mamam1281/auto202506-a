# 26번 - 외부 AI 작업 지시 프롬프트 가이드

## 🎯 **외부 AI 활용 전략**

현재 상황: 백엔드 93% 완성, 프론트엔드 5% (서버만 실행)  
목표: 실제 플레이 가능한 MVP 완성  
외부 AI: OpenAI Codex (코드 생성 특화)

---

## 🚀 **1순위: 프론트엔드 메인 페이지 구현**

### **프롬프트 A1: 메인 페이지 로그인 UI**

```
# TASK: Next.js 15 게임 메인 페이지 구현

## 요구사항
- Framework: Next.js 15.3.3, Tailwind CSS
- 파일 위치: cc-webapp/frontend/app/page.js
- 기능: 로그인 폼 + 토큰 표시 + 게임 선택 메뉴

## 현재 파일 구조
```
cc-webapp/frontend/
├── app/
│   ├── page.js (현재 기본 템플릿, 교체 필요)
│   ├── slot/page.js (placeholder)
│   ├── roulette/page.js (placeholder)  
│   └── gacha/page.js (placeholder)
├── components/
│   ├── SlotMachine.jsx (빈 파일)
│   └── ui/ (기본 컴포넌트들)
└── styles/globals.css (Tailwind 설정 완료)
```

## 백엔드 API 정보
- 베이스 URL: http://localhost:8000
- 로그인: POST /auth/login {"username": "testuser", "password": "testpass"}
- 토큰 조회: GET /users/me/tokens
- 응답 형식: {"cyber_tokens": 1000}

## 구현해야 할 기능
1. **로그인 폼**: username/password 입력 + 로그인 버튼
2. **토큰 표시**: 현재 cyber_tokens 잔액 표시
3. **게임 선택 메뉴**: 슬롯/룰렛/가챠 버튼 (각각 해당 페이지로 라우팅)
4. **기본 레이아웃**: 헤더(로고+토큰) + 메인(게임선택) + 푸터

## 디자인 요구사항
- 모바일 우선 반응형 디자인
- 카지노/게임 느낌의 다크 테마
- 토큰은 골드 색상으로 강조
- 게임 버튼은 큰 카드 형태로 배치
- 로딩 상태 표시

## 기술 요구사항
- React hooks 사용 (useState, useEffect)
- axios를 이용한 API 호출
- localStorage에 로그인 토큰 저장
- 에러 처리 및 사용자 알림

출력해야 할 파일:
1. app/page.js (완전한 구현)
2. components/LoginForm.jsx
3. components/TokenDisplay.jsx  
4. components/GameMenu.jsx
5. services/auth.js (API 호출 함수들)
```

### **프롬프트 A2: 슬롯 게임 컴포넌트**

```
# TASK: 실제 작동하는 슬롯 머신 게임 구현

## 요구사항
- Framework: Next.js 15 + Tailwind CSS
- 파일: app/slot/page.js, components/SlotMachine.jsx
- 기능: 실제 플레이 가능한 3릴 슬롯 머신

## 백엔드 슬롯 API
- 엔드포인트: POST /games/slot/play
- 요청: {"bet_amount": 10}
- 응답: {
    "success": true,
    "result": {
      "reels": [7, 7, 7],
      "is_winner": true,
      "payout": 100,
      "remaining_tokens": 1090
    }
  }

## 게임 로직 요구사항
1. **베팅 선택**: 10, 50, 100 토큰 선택 버튼
2. **3릴 슬롯**: 숫자 1-9, 특수 기호 (7=잭팟)
3. **스핀 애니메이션**: 각 릴이 순차적으로 멈춤 (0.5초 간격)
4. **결과 표시**: 승리 시 번쩍이는 효과 + 획득 토큰 애니메이션
5. **토큰 관리**: 베팅 전 잔액 확인, 결과 후 즉시 반영

## 디자인 요구사항
- 실제 슬롯머신 느낌의 UI
- 각 릴은 세로로 회전하는 애니메이션
- 승리 시 황금빛 번쩍임 효과
- 패배 시 부드러운 페이드아웃
- 베팅 버튼은 하단에 큰 크기로 배치

## 기술 요구사항
- CSS 애니메이션 또는 Framer Motion 사용
- 스핀 중에는 베팅 버튼 비활성화
- 토큰 부족 시 베팅 버튼 비활성화
- 에러 처리 (네트워크 오류, API 에러)

## 상태 관리
- 현재 토큰 잔액
- 선택된 베팅 금액
- 스핀 진행 상태 (대기/스핀중/결과표시)
- 마지막 게임 결과

출력해야 할 파일:
1. app/slot/page.js
2. components/SlotMachine.jsx
3. components/SlotReel.jsx  
4. components/BettingPanel.jsx
5. services/gameApi.js
6. styles/slot-animations.css (필요시)
```

---

## 🚀 **2순위: 백엔드 API 실제 구현** (1-2일)

### **프롬프트 B1: 게임 엔드포인트 완성**

```
# TASK: 게임 API 엔드포인트 실제 구현

## 현재 상황
- 파일: cc-webapp/backend/app/routers/games.py
- 문제: 모든 게임 엔드포인트가 "not implemented yet" 반환
- 목표: 실제 게임 서비스와 연동하여 DB에 저장되는 완전한 API

## 기존 서비스 구조 (이미 완성됨)
```python
# app/services/ 구조
game_service.py (위임 패턴, 100% 커버리지)
├── slot_service.py (96% 커버리지)
├── roulette_service.py (100% 커버리지)  
├── gacha_service.py (91% 커버리지)
└── token_service.py (87% 커버리지)
```

## 데이터베이스 모델 (이미 정의됨)
```python
# app/models.py
class User:
    cyber_tokens: int
    streak_count: int
    segment: str
    
class GameResult:
    user_id: int
    game_type: str
    bet_amount: int
    result: dict
    payout: int
    timestamp: datetime
```

## 구현 필요한 엔드포인트

### 1. POST /games/slot/play
```python
# 요청: {"bet_amount": 10}
# 응답: {"success": bool, "result": {...}, "remaining_tokens": int}

# 필요한 로직:
1. 토큰 잔액 확인 (token_service.check_balance)
2. 베팅 금액 차감 (token_service.deduct_tokens)  
3. 슬롯 게임 실행 (slot_service.play)
4. 승리 시 토큰 지급 (token_service.add_tokens)
5. 게임 결과 DB 저장 (GameResult 생성)
6. 사용자 통계 업데이트 (스트릭, 세그먼트)
```

### 2. POST /games/roulette/play
```python
# 요청: {"bet_amount": 50, "bet_type": "red"}
# 응답: {"success": bool, "result": {...}, "remaining_tokens": int}
```

### 3. POST /games/gacha/play  
```python
# 요청: {"bet_amount": 100}
# 응답: {"success": bool, "result": {...}, "remaining_tokens": int}
```

## 에러 처리
- 토큰 부족: {"error": "insufficient_tokens", "required": 10, "available": 5}
- 잘못된 베팅: {"error": "invalid_bet", "message": "..."}
- 시스템 오류: {"error": "internal_error", "message": "..."}

## 보안 요구사항
- JWT 토큰 검증 (이미 구현됨)
- 베팅 금액 검증 (양수, 최대값 제한)
- Rate limiting (1초에 1회 제한)
- 입력 검증 및 Sanitization

출력해야 할 파일:
1. app/routers/games.py (완전한 구현)
2. app/schemas/game_schemas.py (요청/응답 모델)
3. tests/test_games_api.py (API 테스트)
```

---

## 🚀 **3순위: 룰렛/가챠 기본 UI** (2-3일)

### **프롬프트 C1: 룰렛 게임 UI**

```
# TASK: 룰렛 게임 페이지 및 컴포넌트 구현

## 게임 규칙
- 0-36 숫자 + 빨강/검정 색상
- 베팅 타입: 숫자(35:1), 색상(1:1), 홀짝(1:1)
- 휠 회전 애니메이션 + 볼 움직임

## 백엔드 API
- POST /games/roulette/play
- 요청: {"bet_amount": 50, "bet_type": "red", "bet_value": null}
- 응답: {"result": {"number": 18, "color": "red"}, "payout": 100}

## UI 요구사항
1. **룰렛 휠**: 37개 숫자 배치, 회전 애니메이션
2. **베팅 테이블**: 숫자 그리드 + 색상/홀짝 영역
3. **베팅 칩**: 드래그 앤 드롭으로 베팅 배치
4. **스핀 버튼**: 중앙에 큰 버튼
5. **결과 표시**: 당첨 숫자 강조 + 획득 토큰

출력 파일:
1. app/roulette/page.js
2. components/RouletteWheel.jsx
3. components/BettingTable.jsx
4. components/RouletteChip.jsx
```

### **프롬프트 C2: 가챠 게임 UI**

```
# TASK: 가챠 뽑기 게임 구현

## 게임 규칙
- 등급: Legendary(5%), Epic(15%), Rare(30%), Common(50%)
- Pity 시스템: 10연뽑 보장
- 애니메이션: 박스 열기 + 등급별 연출

## 백엔드 API  
- POST /games/gacha/play
- 요청: {"bet_amount": 100}
- 응답: {"result": {"item": "Dragon Sword", "rarity": "Epic"}}

## UI 요구사항
1. **가챠 박스**: 3D 회전 애니메이션
2. **뽑기 버튼**: 1회(100토큰), 10회(900토큰)
3. **결과 연출**: 등급별 색상 + 파티클 효과
4. **인벤토리**: 획득 아이템 목록
5. **확률 표시**: 각 등급별 확률 정보

출력 파일:
1. app/gacha/page.js
2. components/GachaBox.jsx
3. components/GachaResult.jsx
4. components/ItemInventory.jsx
```

---

## 🚀 **4순위: 네비게이션 및 공통 컴포넌트** (1일)

### **프롬프트 D1: 공통 레이아웃**

```
# TASK: 공통 네비게이션 및 레이아웃 컴포넌트

## 요구사항
1. **헤더**: 로고 + 토큰 표시 + 사용자 메뉴
2. **네비게이션**: 하단 탭 (홈/슬롯/룰렛/가챠/프로필)
3. **레이아웃**: 모든 페이지에 적용되는 공통 구조
4. **토큰 표시**: 실시간 업데이트, 애니메이션

## 기술 요구사항
- Next.js App Router 구조
- 전역 상태 관리 (Context API)
- 토큰 변화 시 애니메이션
- 모바일 우선 반응형

출력 파일:
1. components/Layout.jsx
2. components/Header.jsx
3. components/Navigation.jsx
4. context/GameContext.jsx
5. app/layout.js (수정)
```

---

## 📋 **작업 순서 및 타임라인**

### **Day 1: 메인 페이지 (프롬프트 A1)**
- 로그인 폼 + 토큰 표시 + 게임 메뉴
- 예상 작업량: 6-8시간

### **Day 2: 슬롯 게임 (프롬프트 A2)**  
- 실제 플레이 가능한 슬롯 머신
- 예상 작업량: 8-10시간

### **Day 3: 백엔드 API (프롬프트 B1)**
- 게임 엔드포인트 실제 구현
- 예상 작업량: 6-8시간

### **Day 4-5: 룰렛/가챠 (프롬프트 C1, C2)**
- 기본 UI 및 게임 로직
- 예상 작업량: 10-12시간

### **Day 6: 공통 컴포넌트 (프롬프트 D1)**
- 네비게이션 및 레이아웃 완성
- 예상 작업량: 4-6시간

---

## 🎯 **프롬프트 작성 핵심 원칙**

### **1. 명확한 구조 제공**
- 현재 파일 구조
- 백엔드 API 명세
- 예상 응답 형식

### **2. 구체적인 요구사항**
- 기능 명세서 수준의 상세함
- 디자인 가이드라인
- 기술적 제약사항

### **3. 완성 가능한 범위**
- 한 번에 완성할 수 있는 크기
- 의존성 최소화
- 테스트 가능한 단위

### **4. 품질 보장**
- 에러 처리 요구사항
- 성능 고려사항
- 보안 요구사항

---

## 🚀 **예상 결과**

### **1주 후 달성 목표**
- ✅ 실제 슬롯 게임 플레이 가능
- ✅ 프론트엔드 ↔ 백엔드 완전 연동
- ✅ 토큰 시스템 실시간 동작
- ✅ 룰렛/가챠 기본 UI 완성

### **품질 수준**
- 상용 서비스 수준의 UI/UX
- 안정적인 API 연동
- 모바일 최적화 완료
- 에러 처리 및 로딩 상태

이 프롬프트들을 순서대로 외부 AI에게 전달하면, 체계적이고 효율적으로 프론트엔드 개발을 진행할 수 있습니다!

---

**📅 작성일**: 2025.06.14  
**🎯 목표**: 1주일 내 실제 플레이 가능한 게임 완성  
**⚡ 핵심**: 명확한 요구사항 + 완성 가능한 범위 + 품질 보장
