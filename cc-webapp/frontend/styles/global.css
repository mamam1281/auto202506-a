/* Tailwind CSS v3 directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom variants for theming will be handled in tailwind.config.js */

/*
  미니앱 스타일 고정 크기 컨테이너
  상용 미니앱처럼 단일 스크롤로 깔끔하게 구현
*/
.miniapp-container {
  max-width: 420px;
  width: 100%;
  margin: 0 auto;
  min-height: 100vh;
  position: relative;
  background: var(--color-primary-dark-navy);
  overflow: hidden; /* 컨테이너 자체는 스크롤 없음 */
  display: flex;
  flex-direction: column;
}

.miniapp-content {
  flex: 1;
  width: 100%;
  padding: 0 16px;
  overflow-y: auto; /* 여기서만 스크롤 */
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  /* 스크롤바 영역 보정 */
  box-sizing: border-box;
  /* 스크롤바가 나타나도 중앙 정렬 유지 */
  scrollbar-gutter: stable;
  /* 스크롤 작동을 위한 높이 설정 */
  min-height: 0;
  height: 100%;
}

.miniapp-header {
  max-width: 420px;
  width: 100%;
  margin: 0 auto;
  flex-shrink: 0; /* 고정 크기 */
}

.miniapp-bottom-nav {
  max-width: 420px;
  width: 100%;
  margin: 0 auto;
  flex-shrink: 0; /* 고정 크기 */
}

/*
  1. 컬러 시스템
  모든 디자인 토큰의 기반이 되는 색상 팔레트와 그라데이션을 정의합니다.
*/
:root {
  /* Primary Colors */
  --color-primary-dark-navy: #1a1a1a; /* 주로 배경색 사용 */
  --color-primary-charcoal: #2d2d2d; /* 카드, 표면색 사용 */

  /* Text Colors */
  --color-text-primary: #FFFFFF; /* 기본 텍스트 색상 */
  --color-text-secondary: #D1D5DB; /* 보조 텍스트 색상 */

  /* Accent Colors */
  --color-accent-red: #FF4516; /* 강조색 - 강렬한 빨간색 */
  --color-accent-amber: #6b7280; /* 강조색 - 눈에 편한 회색 */

  /* Neutral Colors */
  --color-neutral-light: #E0E0E0; /* 밝은 중성색 */
  --color-neutral-medium: rgba(160, 160, 160, 0.7); /* 중간 중성색 (플레이스홀더, 비활성 아이콘 등) */
  --color-neutral-dark: #333333; /* 어두운 중성색 (경계선, 구분선 등) */

  /* Semantic Colors - 의미론적 목적에 사용 (성공, 에러, 정보) */
  --color-success: #10B981;
  --color-error: #B90C29;
  --color-info: #135B79;

  /* Special Purple Colors - 그라데이션 및 특정 요소에 사용 */
  --color-purple-primary: #5B30F6;
  --color-purple-secondary: #870DD1;
  --color-purple-tertiary: #8054F2;

  /* Gacha System Colors */
  --gacha-common-glow: #9CA3AF;
  --gacha-common-gradient-from: #6B7280;
  --gacha-common-gradient-to: #9CA3AF;
  --gacha-common-particle-alt: #D1D5DB;
  
  --gacha-rare-glow: #3B82F6;
  --gacha-rare-gradient-from: #2563EB;
  --gacha-rare-gradient-to: #3B82F6;
  --gacha-rare-particle-alt: #60A5FA;
  
  --gacha-epic-glow: #A855F7;
  --gacha-epic-gradient-from: #9333EA;
  --gacha-epic-gradient-to: #A855F7;
  --gacha-epic-particle-alt1: #C084FC;
  --gacha-epic-particle-alt2: #DDD6FE;
  
  --gacha-legendary-glow: #F59E0B;
  --gacha-legendary-gradient-from: #D97706;
  --gacha-legendary-gradient-to: #F59E0B;
  --gacha-legendary-particle-alt: #FCD34D;

  /* Glass Effect Variables */
  --glass-strong: rgba(255, 255, 255, 0.1);
  --glass-ultra-clear: rgba(255, 255, 255, 0.05);

  /* Applied Colors - 실제 UI 요소에 적용될 추상화된 색상 변수 */
  --background: var(--color-primary-dark-navy);
  --foreground: var(--color-text-primary);
  --card: var(--color-primary-charcoal);
  --card-foreground: var(--color-text-primary);
  --popover: var(--color-primary-charcoal);
  --popover-foreground: var(--color-text-primary);
  --primary: var(--color-text-primary); /* 버튼, 링크의 기본 색상 */
  --primary-foreground: var(--color-primary-dark-navy); /* primary 색상 위 텍스트 */
  --secondary: var(--color-primary-charcoal);
  --secondary-foreground: var(--color-text-primary);
  --muted: var(--color-neutral-dark);
  --muted-foreground: var(--color-text-secondary);
  --accent: var(--color-accent-red);
  --accent-foreground: var(--color-text-primary);
  --destructive: var(--color-error);
  --destructive-foreground: var(--color-text-primary);
  --border: var(--color-neutral-dark);
  --input: var(--color-primary-charcoal);
  --input-background: var(--color-primary-charcoal);
  --switch-background: var(--color-neutral-medium);
  --ring: var(--color-purple-secondary); /* 포커스 링 색상 */
}

/* 그라데이션 팔레트 */
:root {
  --gradient-purple-primary: linear-gradient(135deg, var(--color-purple-primary) 0%, var(--color-purple-secondary) 100%);
  --gradient-purple-secondary: linear-gradient(135deg, var(--color-purple-secondary) 0%, var(--color-purple-tertiary) 100%);
  --gradient-accent: linear-gradient(135deg, var(--color-accent-red) 0%, var(--color-accent-amber) 100%);
  --gradient-dark: linear-gradient(135deg, var(--color-primary-dark-navy) 0%, var(--color-primary-charcoal) 100%);
  --gradient-neon: linear-gradient(135deg, var(--color-purple-primary) 0%, var(--color-purple-secondary) 50%, var(--color-purple-tertiary) 100%);
}

/* 라이트 테마 정의 (선택적으로 사용) */
/* 사용자의 prefers-color-scheme가 light일 때 적용되거나, .theme-light 클래스를 추가하여 수동 전환 가능 */
@media (prefers-color-scheme: light) {
  :root {
    --background: #FFFFFF;
    --foreground: #1A1A1A;
    --card: #F7F7FB;
    --card-foreground: #1A1A1A;
    --popover: #F7F7FB;
    --popover-foreground: #1A1A1A;
    --primary: #1A1A1A;
    --primary-foreground: #FFFFFF;
    --secondary: #E0E0E0;
    --secondary-foreground: #1A1A1A;
    --muted: #A0A0A0;
    --muted-foreground: #333333;
    --accent: #FF4516;
    --accent-foreground: #FFFFFF;
    --destructive: #B90C29;
    --destructive-foreground: #FFFFFF;
    --border: #E0E0E0;
    --input: #F7F7FB;
    --input-background: #F7F7FB;
    --switch-background: #E0E0E0;
    --ring: var(--color-accent-red);
  }
}

/* 테마 전환을 위한 클래스 (JS를 통해 동적으로 추가/제거 가능) */
.theme-light {
  --background: #FFFFFF;
  --foreground: #1A1A1A;
  --card: #F7F7FB;
  --card-foreground: #1A1A1A;
  --popover: #F7F7FB;
  --popover-foreground: #1A1A1A;
  --primary: #1A1A1A;
  --primary-foreground: #FFFFFF;
  --secondary: #E0E0E0;
  --secondary-foreground: #1A1A1A;
  --muted: #A0A0A0;
  --muted-foreground: #333333;
  --accent: #FF4516;
  --accent-foreground: #FFFFFF;
  --destructive: #B90C29;
  --destructive-foreground: #FFFFFF;
  --border: #E0E0E0;
  --input: #F7F7FB;
  --input-background: #F7F7FB;
  --switch-background: #E0E0E0;
  --ring: var(--color-accent-red);
}

.theme-dark { /* 기본 다크 모드와 동일하게 설정 (명시적 전환 시 사용) */
  --background: var(--color-primary-dark-navy);
  --foreground: var(--color-text-primary);
  --card: var(--color-primary-charcoal);
  --card-foreground: var(--color-text-primary);
  --popover: var(--color-primary-charcoal);
  --popover-foreground: var(--color-text-primary);
  --primary: var(--color-text-primary);
  --primary-foreground: var(--color-primary-dark-navy);
  --secondary: var(--color-primary-charcoal);
  --secondary-foreground: var(--color-text-primary);
  --muted: var(--color-neutral-dark);
  --muted-foreground: var(--color-text-secondary);
  --accent: var(--color-accent-red);
  --accent-foreground: var(--color-text-primary);
  --destructive: var(--color-error);
  --destructive-foreground: var(--color-text-primary);
  --border: rgba(255, 255, 255, 0.15); /* 더 은은한 테두리 */
  --input: #272727; /* 더 어둡고 세련된 입력 배경 */
  --input-background: #272727;
  --switch-background: var(--color-neutral-medium);
  --ring: #7B29CD; /* 더 선명한 포커스 링 색상 */
}


/*
  2. 타이포그라피
  폰트 패밀리, 크기, 줄 간격 등을 정의합니다.
*/
:root {
  --font-primary: 'Exo', sans-serif;
  --font-secondary: 'Epilogue', sans-serif;
  --font-mono: 'IBM Plex Sans KR', monospace;

  /* Heading Sizes */
  --font-size-h1: 22px;
  --font-size-h2: 20px;
  --font-size-h3: 16px;
  --font-size-h4: 14px; /* 추가: 가이드에는 없지만 h1-h3 사이로 자연스럽게 흐름 */
  --font-size-h5: 12px; /* 추가: h4보다 2px 작은 크기 */
  /* Body & Token Sizes */  
  --font-size-body: 14px;
  --font-size-caption: 12px;
  --font-size-xs: 8px; /* BottomNavigationBar 한글 폰트 1px 줄임 */
  --font-size-token: 12px;

  /* Line Heights */
  --line-height-heading: 1.2; /* 상대적인 값으로 변경하여 유연성 확보 */
  --line-height-body: 1.6;
  --line-height-tight: 1.25; /* 폰트 크기보다 살짝 크게 */
  --line-height-base: 1.5; /* 기본 행간 */

  /* Font Weights */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
}


/*
  3. 그리드 시스템 & 패딩
  8px 그리드 기반의 간격과 패딩 유틸리티를 정의합니다.
*/
:root {  /* Spacing Scale (8px grid system) */
  --spacing-0: 0px;
  --spacing-0-5: 4px; /* 0.25rem - 미세 간격용 */
  --spacing-1: 8px;   /* 0.5rem */
  --spacing-2: 16px;  /* 1rem */
  --spacing-3: 24px;  /* 1.5rem */
  --spacing-4: 32px;  /* 2rem */
  --spacing-5: 40px;  /* 2.5rem */
  --spacing-6: 48px;  /* 3rem */
  --spacing-8: 64px;  /* 4rem */
  --spacing-9: 72px;  /* 4.5rem - BottomNavigationBar 높이용 */
  --spacing-10: 80px; /* 5rem */
  --spacing-12: 96px; /* 6rem */
  --spacing-16: 128px;/* 8rem */
}


/*
  4. 사이즈 시스템
  컴포넌트의 고정 크기와 Border Radius를 정의합니다.
*/
:root {
  /* Button Sizes (height based on 8px grid) */
  --btn-height-md: 44px;
  --btn-height-lg: 56px;
  /* --btn-height-sm: 32px; 사용 안함 */
  /* --btn-height-xl: 64px; 사용 안함 */

  /* Button Padding (based on 8px grid) */
  --btn-padding-md: var(--spacing-2) var(--spacing-4); /* 16px 32px */
  --btn-padding-lg: var(--spacing-3) var(--spacing-5); /* 24px 40px */
  /* --btn-padding-sm: 8px 12px; 사용 안함 */
  /* --btn-padding-xl: 24px 40px; 사용 안함 */
  /* Input Sizes (height based on 8px grid) */
  --input-height-sm: var(--spacing-4); /* 32px */
  --input-height-md: var(--spacing-5); /* 40px */
  --input-height-lg: var(--spacing-6); /* 48px */

  /* Modal Max Widths */
  --modal-max-width-sm: 320px; /* Small 모달 최대 너비 */
  --modal-max-width-md: 480px; /* Medium 모달 최대 너비 */
  --modal-max-width-lg: 640px; /* Large 모달 최대 너비 */
  --modal-max-width-xl: 800px; /* Extra Large 모달 최대 너비 */
  /* Icon Sizes */
  --icon-xs: 12px;
  --icon-sm: 16px;
  --icon-md: 20px;
  --icon-lg: 26px;
  --icon-xl: 36px; /* AppHeader 아이콘용 */
  /* App Header specific variables */
  --app-header-height-mobile: 56px; /* 모바일 헤더 높이 */
  --app-header-height-desktop: 64px; /* 데스크톱 헤더 높이 */
  --app-header-padding-y: var(--spacing-2); /* 헤더 상하 패딩 (16px) */
  --app-header-icon-gap: var(--spacing-1); /* 헤더 아이콘 간 간격 (8px로 더 좁게) */
  --bottom-nav-height: 80px; /* 하단 네비게이션 높이 */

  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 50%; /* 완전 원형 */
}


/*
  5. 반응형 디자인
  브레이크포인트와 Safe Area 지원을 정의합니다.
*/
:root {
  /* Mobile-first breakpoints */
  --mobile-max: 767px; /* 768px 미만 */
  --tablet-max: 1023px; /* 1024px 미만 */
  --desktop-min: 1024px; /* 1024px 이상 */

  /* Layout breakpoints (Specific for Game Platform Layout) */
  --breakpoint-mobile-sm: 480px;   /* 매우 작은 모바일 (480px 이하) */
  --breakpoint-mobile-lg: 768px;   /* 모바일 (768px 이하) */
  --breakpoint-tablet: 1024px;    /* 태블릿 (1024px 이하) */
  --breakpoint-desktop: 1200px;   /* 데스크톱 (1200px 이상) */
}


/*
  6. 호버 & 인터랙션
  기본 트랜지션 속성과 호버, 포커스 스타일을 정의합니다.
*/
:root {
  --transition-fast: 150ms ease-in-out;
  --transition-normal: 200ms ease-in-out;
  --transition-slow: 300ms ease-in-out;
}


/*
  7. 아이콘 시스템
  아이콘 크기와 텍스트와의 조합을 위한 기본 스타일을 정의합니다.
*/
/* 아이콘 크기 변수들은 4. 사이즈 시스템에 정의됨 */


/*
  8. 애니메이션 & 특수 효과
  네온, 글래스모피즘, 뉴모피즘, 그라데이션 애니메이션, 블러 효과 등을 위한 키프레임과 클래스를 정의합니다.
*/
/* Keyframes */
@keyframes neon-pulse {
  from {
    text-shadow:
      0 0 5px var(--color-accent-red),
      0 0 10px var(--color-accent-red),
      0 0 15px var(--color-accent-red),
      0 0 20px var(--color-accent-red);
  }
  to {
    text-shadow:
      0 0 2px var(--color-accent-red),
      0 0 5px var(--color-accent-red),
      0 0 8px var(--color-accent-red),
      0 0 12px var(--color-accent-red);
  }
}

@keyframes neon-border-pulse {
  from {
    box-shadow:
      0 0 5px var(--color-accent-red),
      inset 0 0 5px var(--color-accent-red);
  }
  to {
    box-shadow:
      0 0 10px var(--color-accent-red),
      inset 0 0 10px var(--color-accent-red);
  }
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes button-spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes stripe-flow {
  from { background-position: 100% 0; }
  to { background-position: 0% 0; }
}
@keyframes progress-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
@keyframes progressSlide {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(0%); }
  100% { transform: translateX(100vw); }
}

@keyframes spinnerRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes spinnerRotateReverse {
  0% { transform: rotate(360deg); }
  100% { transform: rotate(0deg); }
}

/*
  9. 성능 최적화
  GPU 가속 및 효율적인 애니메이션 속성 사용을 위한 기본 설정입니다.
*/


/*
  10. 접근성 (A11y)
  스크린 리더 지원 및 색상 대비, 움직임 축소 환경 설정 등을 정의합니다.
*/
:root {
  /* WCAG AA 기준 색상 대비 비율 4.5:1 이상 */
  --color-accessible-text: #FFFFFF; /* 배경 #1a1a1a 대비 12.63:1 */
  --color-accessible-bg: #1a1a1a;
}


/*
  11. 환경 설정
  글로벌 CSS 재설정 및 기본 HTML/Body 스타일을 정의합니다.
*/
/* reset.css 역할을 겸함 */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  border-width: 0;
  border-style: solid;
  border-color: var(--border); /* 기본 border 색상 설정 */
}

html {
  line-height: var(--line-height-base);
  -webkit-text-size-adjust: 100%; /* iOS 자동 폰트 크기 조정 방지 */
  font-family: var(--font-primary); /* 기본 폰트 설정 */
  color: var(--foreground); /* 기본 텍스트 색상 */
  background-color: var(--background); /* 기본 배경색 */
  scroll-behavior: smooth; /* 부드러운 스크롤 */
  -webkit-font-smoothing: antialiased; /* 폰트 렌더링 개선 */
  -moz-osx-font-smoothing: grayscale; /* 폰트 렌더링 개선 (macOS) */
  color-scheme: dark; /* 기본 컬러 스키마 다크로 설정 */
}

body {
  margin: 0;
  line-height: inherit; /* html에서 상속 */
  background-color: var(--background);
  color: var(--foreground);
  overflow-x: hidden; /* 가로 스크롤 방지 */
  -webkit-overflow-scrolling: touch; /* iOS 터치 스크롤 개선 */
}

/* 단락 요소 기본 간격 */
p {
  margin-bottom: var(--spacing-2);
  line-height: var(--line-height-body);
}

p:last-child {
  margin-bottom: 0; /* 마지막 단락은 마진 제거 */
}

/* 폰트 크기 유동적으로 설정 */
h1 {
  font-size: clamp(2rem, 5vw, var(--font-size-h1)); /* 모바일에서 2rem부터 시작, 5vw 비율, 최대 h1 크기 */
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-heading);
  font-family: var(--font-primary);
  color: var(--color-text-primary);
}

h2 {
  font-size: clamp(1.5rem, 4vw, var(--font-size-h2));
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-heading);
  font-family: var(--font-primary);
  color: var(--color-text-primary);
}

h3 {
  font-size: clamp(1.25rem, 3.5vw, var(--font-size-h3));
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-heading);
  font-family: var(--font-primary);
  color: var(--color-text-primary);
}

h4 { /* 추가된 h4 */
  font-size: clamp(1.125rem, 3vw, var(--font-size-h4));
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-heading);
  font-family: var(--font-primary);
  color: var(--color-text-primary);
}

p {
  font-size: clamp(0.875rem, 2.5vw, var(--font-size-body));
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-body);
  font-family: var(--font-primary);
  color: var(--color-text-primary);
}

a {
  color: inherit;
  text-decoration: none;
}

button {
  background: none;
  color: inherit;
  border: none;
  padding: 0;
  font: inherit;
  cursor: pointer;
}


/*
  유틸리티 클래스 (Layer Utilities)
  Tailwind CSS의 @apply 지시문을 사용하거나 직접 정의합니다.
*/
@layer utilities {
  /* 컬러 유틸리티 클래스 */
  .bg-primary-dark-navy { background-color: var(--color-primary-dark-navy); }
  .bg-charcoal { background-color: var(--color-primary-charcoal); }
  .bg-accent-red { background-color: var(--color-accent-red); }
  .bg-accent-amber { background-color: var(--color-accent-amber); }
  .text-primary { color: var(--color-text-primary); }
  .text-secondary { color: var(--color-text-secondary); }
  .text-success { color: var(--color-success); }
  .text-error { color: var(--color-error); }
  .text-info { color: var(--color-info); }

  /* Gradient Backgrounds */
  .bg-gradient-purple { background: var(--gradient-purple-primary); }
  .bg-gradient-accent { background: var(--gradient-accent); }
  .bg-gradient-neon { background: var(--gradient-neon); }
  .bg-gradient-dark { background: var(--gradient-dark); }


  /* Modal 크기 유틸리티 클래스 */
  .max-w-modal-sm { max-width: var(--modal-max-width-sm); }
  .max-w-modal-md { max-width: var(--modal-max-width-md); }
  .max-w-modal-lg { max-width: var(--modal-max-width-lg); }
  .max-w-modal-xl { max-width: var(--modal-max-width-xl); }

  /* Input 세련미를 위한 그림자 효과 */
  .shadow-inner-sm {
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4), inset 0 0 5px rgba(0, 0, 0, 0.2);
  }
  
  .shadow-focused-glow {
    box-shadow: 0 0 0 2px var(--background),
                0 0 0 4px rgba(123, 41, 205, 0.3),
                0 0 15px rgba(123, 41, 205, 0.2);
  }
  
  .shadow-error-glow {
    box-shadow: 0 0 0 2px var(--background),
                0 0 0 4px rgba(185, 12, 41, 0.3),
                0 0 15px rgba(185, 12, 41, 0.2);
  }
  
  .shadow-success-glow {
    box-shadow: 0 0 0 2px var(--background),
                0 0 0 4px rgba(16, 185, 129, 0.3),
                0 0 15px rgba(16, 185, 129, 0.2);
  }

  /* 타이포그라피 클래스 */
  .heading-h1 {
    font-family: var(--font-primary);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-h1);
    line-height: var(--line-height-heading);
    color: var(--color-text-primary);
    text-transform: capitalize;
  }
  .heading-h2 {
    font-family: var(--font-primary);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-h2);
    line-height: var(--line-height-heading);
    color: var(--color-text-primary);
  }
  .heading-h3 {
    font-family: var(--font-primary);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-h3);
    line-height: var(--line-height-heading);
    color: var(--color-text-primary);
  }
  .heading-h4 { /* 추가된 h4 유틸리티 */
    font-family: var(--font-primary);
    font-weight: var(--font-weight-medium);
    font-size: var(--font-size-h4);
    line-height: var(--line-height-heading);
    color: var(--color-text-primary);
  }
  .text-body {
    font-family: var(--font-primary);
    font-weight: var(--font-weight-normal);
    font-size: var(--font-size-body);
    line-height: var(--line-height-body);
    color: var(--color-text-primary);
  }
  .text-caption {
    font-family: var(--font-mono);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-caption);
    line-height: var(--line-height-heading);
    color: var(--color-text-secondary); /* 캡션은 보통 보조 텍스트 색상 */
  }
  .text-token {
    font-family: var(--font-secondary);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-token);
    line-height: var(--line-height-heading);
    color: var(--color-text-primary);
  }


  /* 패딩, 마진, 갭 유틸리티 클래스 */
  .p-0 { padding: var(--spacing-0); }
  .p-1 { padding: var(--spacing-1); }
  .p-2 { padding: var(--spacing-2); }
  .p-3 { padding: var(--spacing-3); }
  .p-4 { padding: var(--spacing-4); }
  .p-5 { padding: var(--spacing-5); }
  .p-6 { padding: var(--spacing-6); }
  .p-8 { padding: var(--spacing-8); }
  .p-10 { padding: var(--spacing-10); }
  .p-12 { padding: var(--spacing-12); }

  .px-1 { padding-left: var(--spacing-1); padding-right: var(--spacing-1); }
  .px-2 { padding-left: var(--spacing-2); padding-right: var(--spacing-2); }
  .px-3 { padding-left: var(--spacing-3); padding-right: var(--spacing-3); }
  .px-4 { padding-left: var(--spacing-4); padding-right: var(--spacing-4); }

  .py-1 { padding-top: var(--spacing-1); padding-bottom: var(--spacing-1); }
  .py-2 { padding-top: var(--spacing-2); padding-bottom: var(--spacing-2); }
  .py-3 { padding-top: var(--spacing-3); padding-bottom: var(--spacing-3); }
  .py-4 { padding-top: var(--spacing-4); padding-bottom: var(--spacing-4); }

  .pt-1 { padding-top: var(--spacing-1); } .pb-1 { padding-bottom: var(--spacing-1); }
  .pt-2 { padding-top: var(--spacing-2); } .pb-2 { padding-bottom: var(--spacing-2); }
  .pt-3 { padding-top: var(--spacing-3); } .pb-3 { padding-bottom: var(--spacing-3); }
  .pt-4 { padding-top: var(--spacing-4); } .pb-4 { padding-bottom: var(--spacing-4); }

  .m-0 { margin: var(--spacing-0); }
  .m-1 { margin: var(--spacing-1); }
  .m-2 { margin: var(--spacing-2); }
  .m-3 { margin: var(--spacing-3); }
  .m-4 { margin: var(--spacing-4); }

  .ml-auto { margin-left: auto; }
  .mr-auto { margin-right: auto; }
  .mx-auto { margin-left: auto; margin-right: auto; }

  .mb-1 { margin-bottom: var(--spacing-1); }
  .mb-2 { margin-bottom: var(--spacing-2); }
  .mb-3 { margin-bottom: var(--spacing-3); }
  .mb-4 { margin-bottom: var(--spacing-4); }
  .mb-6 { margin-bottom: var(--spacing-6); }
  .mt-1 { margin-top: var(--spacing-1); }
  .mt-2 { margin-top: var(--spacing-2); }
  .mt-3 { margin-top: var(--spacing-3); }
  .mt-4 { margin-top: var(--spacing-4); }

  .space-x-1 > * + * { margin-left: var(--spacing-1); }
  .space-x-2 > * + * { margin-left: var(--spacing-2); }
  .space-x-3 > * + * { margin-left: var(--spacing-3); }
  .space-x-4 > * + * { margin-left: var(--spacing-4); }

  .space-y-1 > * + * { margin-top: var(--spacing-1); }
  .space-y-2 > * + * { margin-top: var(--spacing-2); }
  .space-y-3 > * + * { margin-top: var(--spacing-3); }
  .space-y-4 > * + * { margin-top: var(--spacing-4); }

  .gap-1 { gap: var(--spacing-1); }
  .gap-2 { gap: var(--spacing-2); }
  .gap-3 { gap: var(--spacing-3); }
  .gap-4 { gap: var(--spacing-4); }
  .gap-6 { gap: var(--spacing-6); }


  /* 레이아웃 컨테이너 */
  .container {
    max-width: var(--layout-max-width, 1200px); /* 기본값 1200px */
    margin: 0 auto;
    padding: 0 var(--spacing-4); /* 데스크톱 기본 패딩 */
  }

  .grid-container {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--spacing-2);
  }

  .flex-container {
    display: flex;
    gap: var(--spacing-2);
  }


  /* 사이즈 유틸리티 (Width, Height, Radius) */
  .w-full { width: 100%; }
  .h-full { height: 100%; }
  .max-w-full { max-width: 100%; }
  .min-h-screen { min-height: 100vh; min-height: 100dvh; } /* 동적 뷰포트 높이 추가 */

  .rounded-sm { border-radius: var(--radius-sm); }
  .rounded-md { border-radius: var(--radius-md); }
  .rounded-lg { border-radius: var(--radius-lg); }
  .rounded-xl { border-radius: var(--radius-xl); }
  .rounded-full { border-radius: var(--radius-full); }


  /* 호버 & 인터랙션 유틸리티 */
  .transition-all { transition: all var(--transition-normal); }
  .transition-colors { transition: color var(--transition-fast), background-color var(--transition-fast), border-color var(--transition-fast); }
  .transition-transform { transition: transform var(--transition-normal); }

  .hover-lift { transition: transform var(--transition-normal); }
  .hover-lift:hover { transform: translateY(-2px); }

  .hover-scale { transition: transform var(--transition-normal); }
  .hover-scale:hover { transform: scale(1.05); }

  .hover-glow { transition: box-shadow var(--transition-normal); }
  .hover-glow:hover { box-shadow: 0 0 20px rgba(91, 48, 246, 0.5); }

  /* hover-gradient는 배경 속성을 오버라이드하므로, 컴포넌트 내부에서 직접 적용하는 것이 더 좋습니다. */
  /* 예시: .btn-accent:hover { background: var(--gradient-accent); } */


  /* 포커스 스타일 */
  .focus-ring {
    outline: 2px solid transparent;
    outline-offset: 2px;
    transition: outline-color var(--transition-fast), box-shadow var(--transition-fast);
  }
  .focus-ring:focus {
    outline-color: var(--color-accent-red);
  }
  .focus-ring:focus-visible { /* 키보드 탐색 시 더 명확한 시각적 피드백 */
    outline-color: var(--color-accent-red);
    box-shadow: 0 0 0 2px var(--color-primary-dark-navy),
                0 0 0 4px var(--color-accent-red);
  }


  /* 아이콘 크기 클래스 */
  .icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: currentColor; /* 부모 텍스트 색상 상속 */
    flex-shrink: 0; /* flex 컨테이너에서 아이콘이 줄어들지 않도록 */
  }
  .icon-xs { width: var(--icon-xs); height: var(--icon-xs); font-size: var(--icon-xs); }
  .icon-sm { width: var(--icon-sm); height: var(--icon-sm); font-size: var(--icon-sm); }
  .icon-md { width: var(--icon-md); height: var(--icon-md); font-size: var(--icon-md); }
  .icon-lg { width: var(--icon-lg); height: var(--icon-lg); font-size: var(--icon-lg); }
  .icon-xl { width: var(--icon-xl); height: var(--icon-xl); font-size: var(--icon-xl); }
  /* 아이콘과 텍스트 조합 */
  .icon-text {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
  }
  .icon-text-reverse {
    display: flex;
    align-items: center;
    gap: var(--spacing-1);
    flex-direction: row-reverse;
  }
  /* 카드 레이아웃 헬퍼 클래스 - 공간 균형 활용 */
  .card-flex-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    height: 100%;
    width: 100%;
  }
  
  .card-flex-tight {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    height: 100%;
    width: 100%;
    gap: var(--spacing-2); /* 16px */
  }
  
  .card-flex-normal {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    height: 100%;
    width: 100%;
    gap: var(--spacing-4); /* 32px */
  }
  
  .card-flex-loose {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    height: 100%;
    width: 100%;
    gap: var(--spacing-6); /* 48px */
  }

  /* 균형잡힌 공간 활용 클래스 */
  .space-balanced {
    justify-content: space-evenly; /* 균등 분배 */
    align-items: stretch; /* 높이 맞춤 */
  }
  
  .content-fill {
    flex: 1; /* 남은 공간 채우기 */
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* 텍스트 그룹핑 헬퍼 - 개선된 간격 */
  .text-group-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--spacing-2); /* 16px - 더 자연스러운 텍스트간 간격 */
    width: 100%;
  }

  /* 텍스트 정렬 및 줄 간격 유틸리티 */
  .leading-tight-card {
    line-height: var(--line-height-tight); /* 1.25 */
  }
  
  .leading-body-card {
    line-height: var(--line-height-body); /* 1.6 */
  }


  /* 애니메이션 & 특수 효과 클래스 */
  .neon-text {
    color: var(--color-text-primary);
    text-shadow:
      0 0 5px var(--color-accent-red),
      0 0 10px var(--color-accent-red),
      0 0 15px var(--color-accent-red),
      0 0 20px var(--color-accent-red);
    animation: neon-pulse 2s ease-in-out infinite alternate;
  }
  .neon-border {
    border: 2px solid var(--color-accent-red);
    box-shadow:
      0 0 5px var(--color-accent-red),
      inset 0 0 5px var(--color-accent-red);
    animation: neon-border-pulse 2s ease-in-out infinite alternate;
  }

  .glassmorphism {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  }  .glassmorphism-dark {
    background: rgba(26, 26, 26, 0.3);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-lg);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  /* AppHeader 전용 깊이감 있는 다크 글래스모피즘 */
  .glassmorphism-header {
    background: rgba(26, 26, 26, 0.85); /* 더 진한 배경 */
    backdrop-filter: blur(20px) saturate(180%); /* 더 강한 블러와 채도 */
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 4px 24px rgba(0, 0, 0, 0.4),
      0 1px 0 rgba(255, 255, 255, 0.05) inset; /* 상단 내부 하이라이트 */
    transition: all var(--transition-normal);
    will-change: transform, box-shadow; /* GPU 가속 힌트 */
  }

  .neumorphism {
    background: var(--color-neutral-light);
    border-radius: var(--radius-lg);
    box-shadow:
      8px 8px 16px rgba(163, 177, 198, 0.6),
      -8px -8px 16px rgba(255, 255, 255, 0.5);
  }
  .neumorphism-inset {
    background: var(--color-neutral-light);
    border-radius: var(--radius-lg);
    box-shadow:
      inset 8px 8px 16px rgba(163, 177, 198, 0.6),
      inset -8px -8px 16px rgba(255, 255, 255, 0.5);
  }
  .neumorphism-dark {
    background: var(--color-primary-charcoal);
    border-radius: var(--radius-lg);
    box-shadow:
      8px 8px 16px rgba(0, 0, 0, 0.3),
      -8px -8px 16px rgba(68, 68, 68, 0.5);
  }  /* 첫 번째 중복 정의 제거됨 - 아래 더 향상된 정의 사용 */
  /* 호버 리프트 효과 개선 */
  .hover-lift {
    transition: all var(--transition-normal);
  }

  .hover-lift:hover {
    transform: translateY(-6px);
    box-shadow: 
      0 16px 40px rgba(0, 0, 0, 0.2),
      0 6px 16px rgba(91, 48, 246, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.15);
  }
  
  .modern-mesh-card.hover-lift:hover {
    transform: translateY(-8px);
    box-shadow: 
      0 20px 48px rgba(0, 0, 0, 0.35),
      0 8px 16px rgba(91, 48, 246, 0.2),
      0 0 24px rgba(135, 13, 209, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
    border-color: rgba(255, 255, 255, 0.15);
  }

  /* 네온 글로우 카드 */
  .neon-glow {
    background: var(--color-primary-charcoal);
    border: 2px solid var(--color-purple-primary);
    border-radius: var(--radius-lg);
    box-shadow: 
      0 0 8px rgba(91, 48, 246, 0.3),
      inset 0 0 8px rgba(91, 48, 246, 0.1);
    animation: neon-pulse-card 3s ease-in-out infinite alternate;
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
  }

  .neon-glow:hover {
    transform: translateY(-4px);
    box-shadow: 
      0 0 20px rgba(135, 13, 209, 0.4),
      0 8px 32px rgba(0, 0, 0, 0.2),
      inset 0 0 16px rgba(135, 13, 209, 0.15);
    border-color: var(--color-purple-secondary);
  }

  /* 컨텐트 그리드 시스템 */
  .content-grid {
    display: grid;
    gap: var(--spacing-2);
    grid-template-columns: repeat(2, 1fr); /* 모바일: 2열 */
    padding: var(--spacing-2);
  }

  @media (min-width: 769px) {
    .content-grid {
      grid-template-columns: repeat(3, 1fr); /* 태블릿: 3열 */
      gap: var(--spacing-3);
      padding: var(--spacing-3);
    }
  }

  @media (min-width: 1025px) {
    .content-grid {
      grid-template-columns: repeat(4, 1fr); /* 데스크톱: 4열 */
      gap: var(--spacing-4);
      padding: var(--spacing-4);
    }
  }

  /* 컨텐트 카드 기본 스타일 */
  .content-card {
    min-width: 0;
    max-width: 100%;
    height: 120px; /* 모바일 기본 높이 */
    padding: var(--spacing-2);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    cursor: pointer;
    border-radius: var(--radius-lg);
    transition: all var(--transition-normal);
  }

  @media (min-width: 769px) {
    .content-card {
      height: 120px;
      padding: var(--spacing-3);
    }
  }

  @media (min-width: 1025px) {
    .content-card {
      height: 140px;
      padding: var(--spacing-4);
    }
  }

  /* 애니메이션 키프레임 */
  @keyframes mesh-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  @keyframes neon-pulse-card {
    0% { 
      box-shadow: 
        0 0 8px rgba(91, 48, 246, 0.3),
        inset 0 0 8px rgba(91, 48, 246, 0.1);
    }
    100% { 
      box-shadow: 
        0 0 15px rgba(91, 48, 246, 0.5),
        inset 0 0 12px rgba(91, 48, 246, 0.2);
    }
  }
  .animated-gradient-text {
    background: linear-gradient(-45deg, #5B30F6, #870DD1, #8054F2, #FF4516);
    background-size: 400% 400%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradient-shift 3s ease infinite;
    will-change: background-position;
    display: inline-block; /* 텍스트 클립이 더 잘 작동하도록 */
  }

  .blur-sm { filter: blur(4px); }
  .blur-md { filter: blur(8px); }
  .blur-lg { filter: blur(16px); }
  .hover-blur { transition: filter var(--transition-normal); }
  .hover-blur:hover { filter: blur(0px); }
  .backdrop-blur { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }

  .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
  .animate-slideInLeft { animation: slideInLeft 0.5s ease-out; }
  .animate-slideInRight { animation: slideInRight 0.5s ease-out; }
  .animate-scaleIn { animation: scaleIn 0.3s ease-out; }
  .animate-spin { animation: spin 1s linear infinite; }
  .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }


  /* 성능 최적화 유틸리티 */
  .gpu-accelerated {
    will-change: transform, opacity; /* 애니메이션 속성을 명시하여 GPU 가속 힌트 제공 */
    transform: translateZ(0); /* 3D 변환을 사용하여 GPU 가속 강제 */
  }  .optimized-animation {
    transition: transform var(--transition-normal), opacity var(--transition-normal);
  }

  /* 접근성 (A11y) 유틸리티 */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  .sr-only-focusable:active,
  .sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* 움직임 축소 환경 설정 */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* 고대비 모드 지원 */
  @media (prefers-contrast: high) {
    .high-contrast-border {
      border: 2px solid currentColor;
    }
    .high-contrast-text-invert {
      color: var(--background) !important;
      background-color: var(--foreground) !important;
    }
  }

  /* Safe Area Support */
  .safe-top { padding-top: env(safe-area-inset-top); }
  .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-left { padding-left: env(safe-area-inset-left); }
  .safe-right { padding-right: env(safe-area-inset-right); }
  .safe-px {
    padding-left: max(var(--spacing-4), env(safe-area-inset-left));
    padding-right: max(var(--spacing-4), env(safe-area-inset-right));
  }
  .safe-py {
    padding-top: max(var(--spacing-4), env(safe-area-inset-top));
    padding-bottom: max(var(--spacing-4), env(safe-area-inset-bottom));  }
} /* @layer utilities */

/* 연보라 글래스모피즘 효과 - 빠른 시작 전용 */
.glassmorphism-purple {
  background: linear-gradient(135deg, 
    rgba(147, 51, 234, 0.15) 0%, 
    rgba(126, 34, 206, 0.12) 50%, 
    rgba(139, 69, 199, 0.1) 100%);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(147, 51, 234, 0.2);
  box-shadow: 
    0 8px 32px rgba(147, 51, 234, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glassmorphism-purple:hover {
  background: linear-gradient(135deg, 
    rgba(147, 51, 234, 0.2) 0%, 
    rgba(126, 34, 206, 0.17) 50%, 
    rgba(139, 69, 199, 0.15) 100%);
  border-color: rgba(147, 51, 234, 0.3);
  box-shadow: 
    0 12px 40px rgba(147, 51, 234, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  transform: translateY(-2px);
}

/* 바텀 네비게이션 완전 바닥 고정 - 브라우저 전체 */
nav[class*="fixed"][class*="bottom-0"] {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100vw !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  transform: none !important;
  max-width: none !important;
  z-index: 50 !important;
  /* 부모 컨테이너 제약 완전 무시 */
  inset: auto 0 0 0 !important;
}

/* 바텀 네비 내부 div도 완전 패딩 제거 */
nav[class*="fixed"][class*="bottom-0"] > div {
  margin: 0 !important;
  padding: 0 !important;
  max-width: 420px !important;
  width: 100% !important;
  box-sizing: border-box !important;
  transform: none !important;
}

/* 바텀 네비 버튼들의 패딩도 완전 제어 */
nav[class*="fixed"][class*="bottom-0"] button {
  margin: 0 !important;
  box-sizing: border-box !important;
}

/* body와 html에서 여백 완전 제거 */
html {
  margin: 0 !important;
  padding: 0 !important;
  height: 100% !important;
  overflow-x: hidden !important;
  box-sizing: border-box !important;
}

body {
  margin: 0 !important;
  padding: 0 !important;
  height: 100% !important;
  overflow-x: hidden !important;
  position: relative !important;
  box-sizing: border-box !important;
}

/* 뷰포트 전체 설정 */
* {
  box-sizing: border-box !important;
}

/* 모바일 환경에서 safe-area 처리 */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  nav[class*="fixed"][class*="bottom-0"] {
    padding-bottom: env(safe-area-inset-bottom) !important;
  }
}

/* 바텀 네비게이션 완전 고정 - 모든 브라우저, 모든 환경에서 강제 적용 */
nav.fixed.bottom-0 {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100vw !important;
  height: 80px !important;
  margin: 0 !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  transform: none !important;
  max-width: none !important;
  min-width: auto !important;
  z-index: 50 !important;
}

/* 바텀 네비 내부 컨테이너 완전 제어 */
nav.fixed.bottom-0 > div {
  height: 100% !important;
  width: 100% !important;
  max-width: 420px !important;
  margin: 0 auto !important;
  padding: 0 !important;
  box-sizing: border-box !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-around !important;
}

/* 바텀 네비 버튼들의 패딩 완전 제어 */
nav.fixed.bottom-0 button {
  margin: 0 !important;
  box-sizing: border-box !important;
  flex-shrink: 0 !important;
}

/* 웹킷 기반 브라우저에서 바텀 인셋 처리 */
@supports (-webkit-appearance: none) {
  nav.fixed.bottom-0 {
    bottom: env(safe-area-inset-bottom, 0) !important;
  }
}

/* iOS Safari에서 추가 여백 방지 */
@media screen and (-webkit-min-device-pixel-ratio: 2) {
  nav.fixed.bottom-0 {
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
  }
}